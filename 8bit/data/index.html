<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>8bit</title>
</head>

<body>

  <script>
    var text = "";
    function checkText() {
      text = myform.mytext.value;
      sendPost("/text/");
      // document.getElementById("ContentOfText").innerHTML=text;
      document.getElementById("ContentOfText").innerText=text;
      alert(text+"\r\nを送信しました");
    }
    function sendOn(){
      sendGet("/on/");
      document.getElementById("LEDstatus").innerHTML="ON!";
    }
    function sendOff(){
      sendGet("/off/");
      document.getElementById("LEDstatus").innerHTML="OFF!";
    }
    function sendGet(url){
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url, true);
      xhr.send();
    }
    function sendPost(url){
      var xhr = new XMLHttpRequest();
      xhr.open("POST", url, true);
      xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
      xhr.send(text);
    }
  </script>

  <font size=5>8bit試験装置webアプリ</font><br>
  <form name="myform">
    <input id="ContentOfText" type="text" name="mytext" value=""/>
    <input type="submit" value="送信" onclick="checkText()" />
  </form>
  <button id="on" onClick=sendOn()>LED ON</button>
  <button id="off" onClick=sendOff()>LED OFF</button>
  <p id="LEDstatus"></p>
</body>
</html>